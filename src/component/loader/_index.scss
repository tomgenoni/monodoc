// We're using three empty list items so they can be animated separately.
// A single element animation was not possible.

// There is an animation-delay bug in desktop/mobile Safari that causes
// elements to animate incorrectly when the page loads relatively slow.
// The bug won't appear in isolation. We need to use three separate
// keyframe animations to achieve it.

@keyframes tp-loader-animation-1 {

    0%,
    70%,
    100% {
        opacity: 0.2;
    }

    30% {
        opacity: 1;
    }
}

@keyframes tp-loader-animation-2 {

    0%,
    15%,
    85%,
    100% {
        opacity: 0.2;
    }

    45% {
        opacity: 1;
    }
}

@keyframes tp-loader-animation-3 {

    0%,
    30%,
    100% {
        opacity: 0.2;
    }

    60% {
        opacity: 1;
    }
}

.tp-loader {
    display: flex;
    justify-content: center;
    list-style: none;
    padding: 0;
    margin: 0;

    > li {
        width: map-fetch($loader, size, base);
        height: map-fetch($loader, size, base);
        border-radius: 50%;
        animation: tp-loader-animation-1 map-fetch($loader, speed) infinite ease-in;
        background: map-fetch($loader, background, base);
        opacity: 0;
        -moz-transform: rotate(0.1deg); // Fixes small rendering bug in FF;

        &:nth-child(2) {
            animation-name: tp-loader-animation-2;
            margin-left: map-fetch($loader, spacing, base);
            margin-right: map-fetch($loader, spacing, base);
        }

        &:nth-child(3) {
            animation-name: tp-loader-animation-3;
        }
    }

    &--small > li {
        width: map-fetch($loader, size, small);
        height: map-fetch($loader, size, small);

        &:nth-child(2) {
            margin-left: map-fetch($loader, spacing, small);
            margin-right: map-fetch($loader, spacing, small);
        }
    }

    &--inverse > li {
        background: map-fetch($loader, background, reverse);
    }

    &--muted > li {
        background: map-fetch($loader, background, muted);
    }
}
